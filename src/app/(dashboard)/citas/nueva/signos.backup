              {/* Sección: Signos Vitales */}
              <div className="border rounded-lg overflow-hidden">
                <button
                  type="button"
                  onClick={() => toggleSection('vitalSigns')}
                  className="w-full flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 hover:from-green-100 hover:to-emerald-100 dark:hover:from-green-950/30 dark:hover:to-emerald-950/30 transition-colors"
                >
                  <div className="flex items-center gap-2">
                    <Activity className="h-5 w-5 text-green-600 dark:text-green-400" />
                    <span className="font-semibold">Signos Vitales</span>
                    <span className="text-xs text-muted-foreground">(Opcional)</span>
                  </div>
                  {openSections.vitalSigns ? (
                    <ChevronUp className="h-5 w-5 text-muted-foreground" />
                  ) : (
                    <ChevronDown className="h-5 w-5 text-muted-foreground" />
                  )}
                </button>
                {openSections.vitalSigns && (
                  <div className="p-4 space-y-4">
                    {/* Signos Vitales Principales */}
                    <div className="space-y-3">
                      <h4 className="text-sm font-semibold text-muted-foreground uppercase tracking-wide">Signos Vitales</h4>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="space-y-2">
                          <Label htmlFor="temperature" className="flex items-center gap-2">
                            <Thermometer className="h-4 w-4 text-orange-600" />
                            Temperatura (°C)
                          </Label>
                          <Input
                            id="temperature"
                            type="number"
                            step="0.1"
                            min="0"
                            {...register('temperature')}
                            placeholder="36.5"
                            className={errors.temperature ? 'border-destructive' : ''}
                          />
                          {errors.temperature && (
                            <p className="text-sm text-destructive">{errors.temperature.message}</p>
                          )}
                        </div>

                        <div className="space-y-2">
                          <Label htmlFor="heartRate" className="flex items-center gap-2">
                            <Activity className="h-4 w-4 text-red-500" />
                            Frecuencia Cardíaca (lpm)
                          </Label>
                          <Input
                            id="heartRate"
                            type="number"
                            step="1"
                            min="0"
                            {...register('heartRate')}
                            placeholder="75"
                            className={errors.heartRate ? 'border-destructive' : ''}
                          />
                          {errors.heartRate && (
                            <p className="text-sm text-destructive">{errors.heartRate.message}</p>
                          )}
                        </div>

                        <div className="space-y-2">
                          <Label htmlFor="bloodPressure" className="flex items-center gap-2">
                            <Heart className="h-4 w-4 text-red-600" />
                            Presión Arterial (mmHg)
                          </Label>
                          <Input
                            id="bloodPressure"
                            type="text"
                            {...register('bloodPressure')}
                            placeholder="120/80"
                          />
                        </div>

                        <div className="space-y-2">
                          <Label htmlFor="oxygenSaturation" className="flex items-center gap-2">
                            <Droplet className="h-4 w-4 text-blue-600" />
                            Saturación de Oxígeno (SpO₂ %)
                          </Label>
                          <Input
                            id="oxygenSaturation"
                            type="number"
                            step="1"
                            min="0"
                            max="100"
                            {...register('oxygenSaturation')}
                            placeholder="98"
                            className={errors.oxygenSaturation ? 'border-destructive' : ''}
                          />
                          {errors.oxygenSaturation && (
                            <p className="text-sm text-destructive">{errors.oxygenSaturation.message}</p>
                          )}
                        </div>
                      </div>
                    </div>

                    {/* Medidas Antropométricas */}
                    <div className="space-y-3 pt-4 border-t">
                      <h4 className="text-sm font-semibold text-muted-foreground uppercase tracking-wide">Medidas Antropométricas</h4>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="space-y-2">
                          <Label htmlFor="weight" className="flex items-center gap-2">
                            <Weight className="h-4 w-4 text-green-600" />
                            Peso (kg)
                          </Label>
                          <Input
                            id="weight"
                            type="number"
                            step="0.1"
                            min="0"
                            {...register('weight')}
                            placeholder="70.5"
                            className={errors.weight ? 'border-destructive' : ''}
                          />
                          {errors.weight && (
                            <p className="text-sm text-destructive">{errors.weight.message}</p>
                          )}
                        </div>

                        <div className="space-y-2">
                          <Label htmlFor="height" className="flex items-center gap-2">
                            <Ruler className="h-4 w-4 text-blue-600" />
                            Altura (cm)
                          </Label>
                          <Input
                            id="height"
                            type="number"
                            step="0.1"
                            min="0"
                            {...register('height')}
                            placeholder="170"
                            className={errors.height ? 'border-destructive' : ''}
                          />
                          {errors.height && (
                            <p className="text-sm text-destructive">{errors.height.message}</p>
                          )}
                        </div>

                        <div className="space-y-2">
                          <Label htmlFor="waist">Cintura (cm)</Label>
                          <Input
                            id="waist"
                            type="number"
                            step="0.1"
                            min="0"
                            {...register('waist')}
                            placeholder="80"
                            className={errors.waist ? 'border-destructive' : ''}
                          />
                          {errors.waist && (
                            <p className="text-sm text-destructive">{errors.waist.message}</p>
                          )}
                        </div>

                        <div className="space-y-2">
                          <Label htmlFor="hip">Cadera (cm)</Label>
                          <Input
                            id="hip"
                            type="number"
                            step="0.1"
                            min="0"
                            {...register('hip')}
                            placeholder="95"
                            className={errors.hip ? 'border-destructive' : ''}
                          />
                          {errors.hip && (
                            <p className="text-sm text-destructive">{errors.hip.message}</p>
                          )}
                        </div>
                      </div>
                    </div>

                    {/* BMI Calculation Display */}
                    {(() => {
                      const weightValue = watch('weight');
                      const heightValue = watch('height');
                      
                      if (weightValue && heightValue) {
                        const weight = Number(weightValue);
                        const height = Number(heightValue) / 100; // Convert cm to meters
                        
                        if (weight > 0 && height > 0) {
                          const bmi = weight / (height * height);
                          const bmiRounded = bmi.toFixed(2);
                          
                          let bmiCategory = '';
                          let bmiColor = '';
                          
                          if (bmi < 18.5) {
                            bmiCategory = 'Bajo peso';
                            bmiColor = 'text-blue-600 dark:text-blue-400';
                          } else if (bmi >= 18.5 && bmi < 25) {
                            bmiCategory = 'Normal';
                            bmiColor = 'text-green-600 dark:text-green-400';
                          } else if (bmi >= 25 && bmi < 30) {
                            bmiCategory = 'Sobrepeso';
                            bmiColor = 'text-yellow-600 dark:text-yellow-400';
                          } else {
                            bmiCategory = 'Obesidad';
                            bmiColor = 'text-red-600 dark:text-red-400';
                          }
                          
                          return (
                            <div className="rounded-lg border-2 border-green-200 dark:border-green-800 bg-green-50/50 dark:bg-green-950/20 p-4">
                              <div className="flex items-center gap-3">
                                <div className="p-2 rounded-full bg-green-500/10">
                                  <Calculator className="h-5 w-5 text-green-600 dark:text-green-400" />
                                </div>
                                <div className="flex-1">
                                  <p className="text-sm font-medium text-green-900 dark:text-green-100">
                                    Índice de Masa Corporal (IMC)
                                  </p>
                                  <p className="text-xs text-green-700 dark:text-green-300 mt-0.5">
                                    Calculado automáticamente: IMC = peso / (talla²)
                                  </p>
                                </div>
                                <div className="text-right">
                                  <p className={`text-2xl font-bold ${bmiColor}`}>
                                    {bmiRounded}
                                  </p>
                                  <p className={`text-sm font-medium ${bmiColor}`}>
                                    {bmiCategory}
                                  </p>
                                </div>
                              </div>
                            </div>
                          );
                        }
                      }
                      
                      return null;
                    })()}
                  </div>
                )}
              </div>